---
title: "I love everything() from the tidyverse"  
date: 2020-08-20
categories:  
  - R
tags:  
  - wrangling
  - tidyverse
  - python
  - everything
slug: "everything"  
image:
  preview_only: FALSE
links:
- icon: mug-hot
  icon_pack: fas
  name: Give a Coffee
  url: https://ko-fi.com/zachbogart
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

It is probably true that I love everything from the tidyverse, full stop, but in this case parens matter. Reordering columns happens a bunch and it can be a pain, but `everything()` allows for easy manipulation of columns in a dataframe. Let's give it a go.

## How I'd do it in Python

Say I have some data on rainfall and I want to add a column for the decade in which the reading was taken.

```{r include=FALSE}
library(reticulate)
use_python("/Users/bogart/Documents/Zach/coding/venv_fruitbasket/venv_lychee/bin/python")
```

```{python}
import pandas as pd
pd.set_option("display.max_columns", 20)

df = pd.read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-07/rainfall.csv')

df["decade"] = df.year // 10 * 10

df.head()
```

If I create a new column, it is tacked onto the end of the dataframe, but I'd prefer the `decade` and `year` columns to be closer together. In python, I find this to be kind of a pain since you need to know the column index and you have to do conversions and junk ([insert](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.insert.html) is also an option, but you have to drop duplicate columns...it's a whole deal):

```{python}
cols = list(df.columns)
# manual ordering of list...ewww
cols = cols[:3] + [cols[-1]] + cols[3:-1]

df[cols].head()
```

## How Tidyverse does it

I find it much easier to manipulate the column names. In comes `everything()` to the rescue. Combining with `select()`, you can get pretty fancy.

```{r message = FALSE}
library(tidyverse)

rainfall <- read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-07/rainfall.csv') %>% 
  mutate(decade = year %/% 10 * 10)
```

```{r}
rainfall %>% 
  select(station_code:year, decade, everything())
```

The reason I love `everything()` is you don't have to think about it. Get the thing in place then shove the rest on and it'll deal with it nicely. Also learned in going through this that [`last_col()`](https://www.rdocumentation.org/packages/tidyselect/versions/1.0.0/topics/select_helpers) is also available to help out


